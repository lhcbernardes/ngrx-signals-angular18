<form class="filtros">
  <app-search-input
    placeholder="Buscar itens..."
    [debounceTime]="400"
    [value]="store.filtros().searchTerm"
    (searchChange)="onSearchChange($event)"
    (searchClear)="onSearchClear()"
    [disabled]="store.loading()"
  ></app-search-input>

  <select (change)="onSelectChange('status', $event)" [value]="store.filtros().status">
    <option value="">Todos status</option>
    <option *ngFor="let status of store.status()" [value]="status">{{ status }}</option>
  </select>

  <select (change)="onSelectChange('categoria', $event)" [value]="store.filtros().categoria">
    <option value="">Todas categorias</option>
    <option *ngFor="let categoria of store.categorias()" [value]="categoria">{{ categoria }}</option>
  </select>

  <select (change)="onSelectChange('plataforma', $event)" [value]="store.filtros().plataforma">
    <option value="">Todas plataformas</option>
    <option *ngFor="let plataforma of store.plataformas()" [value]="plataforma">{{ plataforma }}</option>
  </select>

  <button type="button" (click)="alternarValor()" [disabled]="store.loading()">
    {{ store.filtros().checkSwitch }}
  </button>

  <button type="button" (click)="limparFiltros()" [disabled]="store.loading()">
    Limpar Filtros
  </button>
</form>

<div *ngIf="store.loading()">Carregando itens...</div>

<table *ngIf="store.items().length > 0">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Categoria</th>
      <th>Status</th>
      <th>Plataforma</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of store.items()">
      <td>{{ item.nome }}</td>
      <td>{{ item.categoria }}</td>
      <td>{{ item.status }}</td>
      <td>{{ item.plataforma }}</td>
    </tr>
  </tbody>
</table>

<div *ngIf="store.items().length === 0 && !store.loading()">
  Nenhum item encontrado com os filtros atuais.
</div>

<button (click)="goBack()">Voltar</button>